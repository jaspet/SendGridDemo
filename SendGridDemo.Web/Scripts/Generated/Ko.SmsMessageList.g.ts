
/// <reference path="../coalesce.dependencies.d.ts" />

// Generated by IntelliTect.Coalesce

module ListViewModels {
    
    export namespace SmsMessageDataSources {
        export class Default extends Coalesce.DataSource<ViewModels.SmsMessage> { }
    }
    
    export class SmsMessageList extends Coalesce.BaseListViewModel<ViewModels.SmsMessage> {
        public readonly modelName: string = "SmsMessage";
        public readonly apiController: string = "/SmsMessage";
        public modelKeyName: string = "pkMessageId";
        public itemClass: new () => ViewModels.SmsMessage = ViewModels.SmsMessage;
        
        public filter: {
            subject?: string;
            pkMessageId?: string;
            messageId?: string;
            to?: string;
            messageText?: string;
        } | null = null;
        
        /** The namespace containing all possible values of this.dataSource. */
        public dataSources: typeof SmsMessageDataSources = SmsMessageDataSources;
        
        /** The data source on the server to use when retrieving objects. Valid values are in this.dataSources. */
        public dataSource: Coalesce.DataSource<ViewModels.SmsMessage> = new this.dataSources.Default();
        
        /** Configuration for all instances of SmsMessageList. Can be overidden on each instance via instance.coalesceConfig. */
        public static coalesceConfig = new Coalesce.ListViewModelConfiguration<SmsMessageList, ViewModels.SmsMessage>(Coalesce.GlobalConfiguration.listViewModel);
        
        /** Configuration for this SmsMessageList instance. */
        public coalesceConfig: Coalesce.ListViewModelConfiguration<SmsMessageList, ViewModels.SmsMessage>
            = new Coalesce.ListViewModelConfiguration<SmsMessageList, ViewModels.SmsMessage>(SmsMessageList.coalesceConfig);
        
        
        /**
            Methods and properties for invoking server method SendSms.
        */
        public readonly sendSms = new SmsMessageList.SendSms(this);
        public static SendSms = class SendSms extends Coalesce.ClientMethod<SmsMessageList, string> {
            public readonly name = 'SendSms';
            public readonly verb = 'POST';
            
            /** Calls server method (SendSms) with the given arguments */
            public invoke = (to: string | null, message: string | null, callback?: (result: string) => void, reload: boolean = true): JQueryPromise<any> => {
                return this.invokeWithData({ to: to, message: message }, callback, reload);
            };
            
            /** Object that can be easily bound to fields to allow data entry for the method's parameters */
            public args = new SendSms.Args(); 
            public static Args = class Args {
                public to: KnockoutObservable<string | null> = ko.observable(null);
                public message: KnockoutObservable<string | null> = ko.observable(null);
            };
            
            /** Calls server method (SendSms) with an instance of SendSms.Args, or the value of this.args if not specified. */
            public invokeWithArgs = (args = this.args, callback?: (result: string) => void, reload: boolean = true): JQueryPromise<any> => {
                return this.invoke(args.to(), args.message(), callback, reload);
            }
            
            /** Invokes the method after displaying a browser-native prompt for each argument. */
            public invokeWithPrompts = (callback?: (result: string) => void, reload: boolean = true): JQueryPromise<any> | undefined => {
                var $promptVal: string | null = null;
                $promptVal = prompt('To');
                if ($promptVal === null) return;
                var to: string = $promptVal;
                $promptVal = prompt('Message');
                if ($promptVal === null) return;
                var message: string = $promptVal;
                return this.invoke(to, message, callback, reload);
            };
            
            protected loadResponse = (data: Coalesce.ItemResult, callback?: (result: string) => void, reload: boolean = true) => {
                this.result(data.object);
                if (reload) {
                    var result = this.result();
                    this.parent.load(typeof(callback) == 'function' ? () => callback(result) : undefined);
                } else if (typeof(callback) == 'function') {
                    callback(this.result());
                }
            };
        };
        
        protected createItem = (newItem?: any, parent?: any) => new ViewModels.SmsMessage(newItem, parent);
        
        constructor() {
            super();
        }
    }
}
